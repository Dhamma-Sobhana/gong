{% extends 'base.njk' %}

{% set title = 'Gong - Schedule' %}

{% block content %}

<section>
    <div>

<h1>Gong Schedule</h1>

{% if automation.enabled %}
<div class="overflow-scroll">
<form method="post">
<table>
<thead>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Location</th>
        <th>Course</th>
        <th>Status</th>
    </tr>
</thead>
{% for entry in automation.getSchedule() %}
<tr class="{% if not entry.active %}disabled{% endif %}">
    <td>{{ entry.time.toFormat('yyyy-MM-dd HH:mm') }}</td>
    <td>{{ entry.type }}</td>
    <td>{{ entry.locations }}</td>
    <td>{{ entry.getCourse() }}</td>
    <td>
        {% if entry.active %}
        <button name="entry_id" value="{{entry.time}}" formaction="/automation/entry/disable" type="submit" class="red">Disable</button>
        {% else %}
        <button name="entry_id" value="{{entry.time}}" formaction="/automation/entry/enable" type="submit" class="blue">Enable</button>
        {% endif %}
    <td>
</tr>
{% else %}
<tr>
    <td>Schedule not available</td>
</tr>
{% endfor %}
</table>
</form>
</div>

<a href="/automation/schedule" class="button">Show full gong schedule</a>

<h3>Courses</h3>
<ul class="courses">
{% for course in automation.getCourses() %}
    <li>{{ course.start.toISODate() }} - {{ course.end.toISODate() }} - {{ course.type }}</li>
{% endfor%}
</ul>

{% else %}
<h3>Automation: disabled</h3>
{% endif %}
</div>
</section>
{% endblock %}